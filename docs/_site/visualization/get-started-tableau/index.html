<!DOCTYPE html>
<html>
  <head>
    <title>[vis] Getting Started With Tableau – Chaoran – data science self-learning repository.</title>

        <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="Intro to Tableau
Aspired by the course ‘Data Visualization’ offered by University of Illinois on Cousera, I have worked on the interactive data visualization using Tableau. There is a free version of Tableau Public is available and you can upload the visualization online for sharing.  
Tableau is one of the Business Intelligence tools that makes it easier to do with aesthetic chart plotting and interactive report generating. There are 3 main components used in Tableau: Worksheet, Dashboard and Story.

  Worksheets are single chart or plot
  Dashboard is a single page can compose with mupliple charts or plots
  Story is like powerpoint in MS Office, which put a series of pages of charts in sequence.


" />
    <meta property="og:description" content="Intro to Tableau
Aspired by the course ‘Data Visualization’ offered by University of Illinois on Cousera, I have worked on the interactive data visualization using Tableau. There is a free version of Tableau Public is available and you can upload the visualization online for sharing.  
Tableau is one of the Business Intelligence tools that makes it easier to do with aesthetic chart plotting and interactive report generating. There are 3 main components used in Tableau: Worksheet, Dashboard and Story.

  Worksheets are single chart or plot
  Dashboard is a single page can compose with mupliple charts or plots
  Story is like powerpoint in MS Office, which put a series of pages of charts in sequence.


" />
    
    <meta name="author" content="Chaoran" />

    
    <meta property="og:title" content="[vis] Getting Started With Tableau" />
    <meta property="twitter:title" content="[vis] Getting Started With Tableau" />
    

    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" type="text/css" href="/DataStory/style.css" />
    <link rel="alternate" type="application/rss+xml" title="Chaoran - data science self-learning repository." href="/DataStory/feed.xml" />

    <!-- Created with Jekyll Now - http://github.com/barryclark/jekyll-now -->
  </head>

  <body>
    <div class="wrapper-masthead">
      <div class="container">
        <header class="masthead clearfix">
          <a href="/DataStory/" class="site-avatar"><img src="" /></a>

          <div class="site-info">
            <h1 class="site-name"><a href="/DataStory/">Chaoran</a></h1>
            <p class="site-description">data science self-learning repository.</p>
          </div>

          <nav>
            <a href="/DataStory/">Blog</a>
            <a href="/DataStory/about">About</a>
          </nav>
        </header>
      </div>
    </div>

    <div id="main" role="main" class="container">
      <article class="post">
  <h1>[vis] Getting Started With Tableau</h1>

  <div class="entry">
    <h2 id="intro-to-tableau">Intro to Tableau</h2>
<p>Aspired by the course ‘Data Visualization’ offered by University of Illinois on Cousera, I have worked on the interactive data visualization using Tableau. There is a free version of <a href="https://public.tableau.com/s/">Tableau Public</a> is available and you can upload the visualization online for sharing.  <br />
Tableau is one of the Business Intelligence tools that makes it easier to do with aesthetic chart plotting and interactive report generating. There are 3 main components used in Tableau: Worksheet, Dashboard and Story.</p>
<ul>
  <li><strong>Worksheets</strong> are single chart or plot</li>
  <li><strong>Dashboard</strong> is a single page can compose with mupliple charts or plots</li>
  <li><strong>Story</strong> is like powerpoint in MS Office, which put a series of pages of charts in sequence.</li>
</ul>

<p>There are two kinds of charts that interest me: smart map and bubble chart. <br />
I’m going to make use of the two chart to visual the U.S. Weather data set.</p>

<h2 id="description-of-the-data-set">Description of the data set</h2>
<p>The data is taken by U.S. Weather Serivce, the link of data set is available <a href="https://d396qusza40orc.cloudfront.net/repdata%2Fdata%2FStormData.csv.bz2">here</a>. The comphrensive description of the data is in <a href="https://d396qusza40orc.cloudfront.net/repdata%2Fpeer2_doc%2Fpd01016005curr.pdf">here</a>.</p>

<h2 id="data-manipulation-using-r">Data manipulation using R</h2>
<p>As Tableau is not ideal for data munging, I would like to do the first-hand pre-processing with R.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">head</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="nf">c</span><span class="p">(</span><span class="s2">"EVTYPE"</span><span class="p">,</span><span class="w">   </span><span class="s2">"LATITUDE"</span><span class="w">  </span><span class="p">,</span><span class="w"> </span><span class="s2">"LONGITUDE"</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="s2">"STATE"</span><span class="w"> </span><span class="p">,</span><span class="s2">"BGN_DATE"</span><span class="p">,</span><span class="s2">"FATALITIES"</span><span class="p">,</span><span class="s2">"INJURIES"</span><span class="p">,</span><span class="s2">"PROPDMG"</span><span class="p">,</span><span class="s2">"PROPDMGEXP"</span><span class="w"> </span><span class="p">)])</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   EVTYPE LATITUDE LONGITUDE STATE           BGN_DATE FATALITIES INJURIES
1 TORNADO     3040      8812    AL  4/18/1950 0:00:00          0       15
2 TORNADO     3042      8755    AL  4/18/1950 0:00:00          0        0
3 TORNADO     3340      8742    AL  2/20/1951 0:00:00          0        2
4 TORNADO     3458      8626    AL   6/8/1951 0:00:00          0        2
5 TORNADO     3412      8642    AL 11/15/1951 0:00:00          0        2
6 TORNADO     3450      8748    AL 11/15/1951 0:00:00          0        6
  PROPDMG PROPDMGEXP
1    25.0          K
2     2.5          K
3    25.0          K
4     2.5          K
5     2.5          K
6     2.5          K
</code></pre></div></div>

<h3 id="formatting-variable-year-longitude-latitude">Formatting variable Year, Longitude, Latitude</h3>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data</span><span class="o">$</span><span class="n">BGN_DATE</span><span class="o">&lt;-</span><span class="n">as.Date</span><span class="p">(</span><span class="n">data</span><span class="o">$</span><span class="n">BGN_DATE</span><span class="p">,</span><span class="n">format</span><span class="o">=</span><span class="s1">'%m/%d/%Y %H:%M:%S'</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">lubridate</span><span class="p">)</span><span class="w">
</span><span class="n">data</span><span class="o">$</span><span class="n">Year</span><span class="o">&lt;-</span><span class="n">year</span><span class="p">(</span><span class="n">data</span><span class="o">$</span><span class="n">BGN_DATE</span><span class="p">)</span><span class="w">
</span><span class="n">data</span><span class="o">$</span><span class="n">LONGITUDE</span><span class="o">&lt;-</span><span class="p">(</span><span class="o">-</span><span class="n">data</span><span class="o">$</span><span class="n">LONGITUDE</span><span class="o">/</span><span class="m">100</span><span class="p">)</span><span class="w">
</span><span class="n">data</span><span class="o">$</span><span class="n">LATITUDE</span><span class="o">&lt;-</span><span class="n">data</span><span class="o">$</span><span class="n">LATITUDE</span><span class="o">/</span><span class="m">100</span><span class="w">
</span><span class="n">head</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="nf">c</span><span class="p">(</span><span class="s2">"EVTYPE"</span><span class="p">,</span><span class="w">   </span><span class="s2">"LATITUDE"</span><span class="w">  </span><span class="p">,</span><span class="w"> </span><span class="s2">"LONGITUDE"</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="s2">"STATE"</span><span class="w"> </span><span class="p">,</span><span class="s2">"Year"</span><span class="p">,</span><span class="s2">"FATALITIES"</span><span class="p">,</span><span class="s2">"INJURIES"</span><span class="p">,</span><span class="s2">"PROPDMG"</span><span class="p">,</span><span class="s2">"PROPDMGEXP"</span><span class="w"> </span><span class="p">)])</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   EVTYPE LATITUDE LONGITUDE STATE Year FATALITIES INJURIES PROPDMG
1 TORNADO    30.40    -88.12    AL 1950          0       15    25.0
2 TORNADO    30.42    -87.55    AL 1950          0        0     2.5
3 TORNADO    33.40    -87.42    AL 1951          0        2    25.0
4 TORNADO    34.58    -86.26    AL 1951          0        2     2.5
5 TORNADO    34.12    -86.42    AL 1951          0        2     2.5
6 TORNADO    34.50    -87.48    AL 1951          0        6     2.5
  PROPDMGEXP
1          K
2          K
3          K
4          K
5          K
6          K
</code></pre></div></div>

<h3 id="creating-economic-loss--property-loss--crop-loss">Creating Economic Loss = Property Loss + Crop Loss</h3>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data</span><span class="o">$</span><span class="n">PROPDMGEXP</span><span class="o">&lt;-</span><span class="n">transformEXP</span><span class="p">(</span><span class="n">data</span><span class="o">$</span><span class="n">PROPDMGEXP</span><span class="p">)</span><span class="w">
</span><span class="n">data</span><span class="o">$</span><span class="n">CROPDMGEXP</span><span class="o">&lt;-</span><span class="n">transformEXP</span><span class="p">(</span><span class="n">data</span><span class="o">$</span><span class="n">CROPDMGEXP</span><span class="p">)</span><span class="w">
</span><span class="n">data</span><span class="o">$</span><span class="n">economicLoss</span><span class="o">&lt;-</span><span class="n">with</span><span class="p">(</span><span class="n">data</span><span class="p">,(</span><span class="n">PROPDMG</span><span class="o">*</span><span class="p">(</span><span class="m">10</span><span class="o">**</span><span class="n">PROPDMGEXP</span><span class="p">)</span><span class="o">+</span><span class="n">CROPDMG</span><span class="o">*</span><span class="p">(</span><span class="m">10</span><span class="o">**</span><span class="n">CROPDMGEXP</span><span class="p">)))</span><span class="w">
</span></code></pre></div></div>
<h3 id="creating-health-impact--fatalities--injuries">Creating Health Impact = Fatalities + Injuries</h3>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data</span><span class="o">$</span><span class="n">healthImpact</span><span class="o">&lt;-</span><span class="n">data</span><span class="o">$</span><span class="n">FATALITIES</span><span class="o">+</span><span class="n">data</span><span class="o">$</span><span class="n">INJURIES</span><span class="w">
</span><span class="n">head</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="nf">c</span><span class="p">(</span><span class="s2">"EVTYPE"</span><span class="p">,</span><span class="w">   </span><span class="s2">"LATITUDE"</span><span class="w">  </span><span class="p">,</span><span class="w"> </span><span class="s2">"LONGITUDE"</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="s2">"STATE"</span><span class="w"> </span><span class="p">,</span><span class="s2">"BGN_DATE"</span><span class="p">,</span><span class="s2">"healthImpact"</span><span class="p">,</span><span class="s2">"economicLoss"</span><span class="w"> </span><span class="p">)])</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   EVTYPE LATITUDE LONGITUDE STATE   BGN_DATE healthImpact economicLoss
1 TORNADO    30.40    -88.12    AL 1950-04-18           15        25000
2 TORNADO    30.42    -87.55    AL 1950-04-18            0         2500
3 TORNADO    33.40    -87.42    AL 1951-02-20            2        25000
4 TORNADO    34.58    -86.26    AL 1951-06-08            2         2500
5 TORNADO    34.12    -86.42    AL 1951-11-15            2         2500
6 TORNADO    34.50    -87.48    AL 1951-11-15            6         2500
</code></pre></div></div>

<h3 id="subset-the-top-5-weather">Subset the top 5 weather</h3>
<p>Too many EVTYPE, let’s look at the top 5 in frequency, after removing the disasters without impact or loss.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data</span><span class="o">&lt;-</span><span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="o">$</span><span class="n">economicLoss</span><span class="o">!=</span><span class="m">0</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">data</span><span class="o">$</span><span class="n">healthImpact</span><span class="o">!=</span><span class="m">0</span><span class="p">,]</span><span class="w">
</span><span class="n">freqEVTYPE</span><span class="o">&lt;-</span><span class="n">data.frame</span><span class="p">(</span><span class="n">table</span><span class="p">(</span><span class="n">data</span><span class="o">$</span><span class="n">EVTYPE</span><span class="p">))</span><span class="w">
</span><span class="n">freqEVTYPE</span><span class="o">&lt;-</span><span class="n">sortDF</span><span class="p">(</span><span class="n">freqEVTYPE</span><span class="p">,</span><span class="n">freqEVTYPE</span><span class="o">$</span><span class="n">Freq</span><span class="p">)</span><span class="w">
</span><span class="n">head</span><span class="p">(</span><span class="n">freqEVTYPE</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>                 Var1  Freq
423         TSTM WIND 63234
364 THUNDERSTORM WIND 43655
407           TORNADO 39944
134              HAIL 26130
73        FLASH FLOOD 20967
258         LIGHTNING 13293
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">top5</span><span class="o">&lt;-</span><span class="nf">as.character</span><span class="p">(</span><span class="n">freqEVTYPE</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">,</span><span class="m">1</span><span class="p">])</span><span class="w">
</span><span class="n">data</span><span class="o">&lt;-</span><span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="o">$</span><span class="n">EVTYPE</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="n">top5</span><span class="p">,]</span><span class="w">
</span></code></pre></div></div>

<h3 id="select-the-variables-we-need">Select the variables we need</h3>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">var</span><span class="o">&lt;-</span><span class="nf">c</span><span class="p">(</span><span class="s2">"EVTYPE"</span><span class="p">,</span><span class="w">   </span><span class="s2">"LATITUDE"</span><span class="w">  </span><span class="p">,</span><span class="w"> </span><span class="s2">"LONGITUDE"</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="s2">"STATE"</span><span class="w"> </span><span class="p">,</span><span class="s2">"Year"</span><span class="p">,</span><span class="s2">"healthImpact"</span><span class="p">,</span><span class="s2">"economicLoss"</span><span class="w"> </span><span class="p">)</span><span class="w">
</span><span class="n">data</span><span class="o">&lt;-</span><span class="n">data</span><span class="p">[,</span><span class="n">var</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<h3 id="output-the-datacsv">Output the data.csv</h3>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">write.csv</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="s1">'data.csv'</span><span class="p">,</span><span class="n">row.names</span><span class="o">=</span><span class="nb">F</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

  </div>

  <div class="date">
    Written on August 10, 2015
  </div>

  
</article>

    </div>

    <div class="wrapper-footer">
      <div class="container">
        <footer class="footer">
          












        </footer>
      </div>
    </div>

    

  </body>
</html>
